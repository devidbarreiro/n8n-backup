{
  "active": false,
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Stock Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Calculator": {
      "ai_tool": [
        [
          {
            "node": "Stock Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get many coins in CoinGecko": {
      "ai_tool": [
        []
      ]
    },
    "Finnhub": {
      "main": [
        []
      ]
    },
    "Call 'Alpha Vantage Agent'": {
      "ai_tool": [
        []
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Stock Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Stock Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Stock Agent": {
      "main": [
        []
      ]
    },
    "Yahoo Finance Quote": {
      "ai_tool": [
        [
          {
            "node": "Stock Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-08T08:09:58.741Z",
  "id": "GqjrPFI8GOZRzrzn",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Stock Agent",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -240,
        48
      ],
      "id": "591a28f9-c92b-4373-ad75-dc86a8e94745",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "nmk2GFM41ZOhRE5f",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "typeVersion": 1,
      "position": [
        -112,
        48
      ],
      "id": "008b8ceb-534d-4bf2-bb53-28d15f980fa4",
      "name": "Calculator"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.coinGeckoTool",
      "typeVersion": 1,
      "position": [
        -464,
        352
      ],
      "id": "9aead17b-07eb-4011-af03-2700e34b2034",
      "name": "Get many coins in CoinGecko"
    },
    {
      "parameters": {
        "url": "https://finnhub.io/api/v1",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Finnhub-Token",
              "value": "d3j1rvpr01qruraj4db0d3j1rvpr01qruraj4dbg"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -464,
        -512
      ],
      "id": "25e1c483-3a8b-476b-91b5-455a09a33065",
      "name": "Finnhub"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "mR9mhMIz5NmCBHKI",
          "mode": "list",
          "cachedResultUrl": "/workflow/mR9mhMIz5NmCBHKI",
          "cachedResultName": "Alpha Vantage Agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -464,
        144
      ],
      "id": "4939a364-ae14-455b-853a-b954ecd03cdc",
      "name": "Call 'Alpha Vantage Agent'"
    },
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -464,
        -192
      ],
      "id": "57f42ceb-8672-409d-9c2e-2980fa9d2f56",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.query }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "You are a professional stock market analyst with access to Yahoo Finance data.\n\nYou can make UNLIMITED queries using the get_yahoo_data tool.\n\nAVAILABLE ACTIONS:\n- \"quote\" - Current price, volume, change\n- \"historical\" - Historical OHLC data (requires interval and range)\n- \"news\" - Latest company news\n- \"fundamentals\" - Company overview and financial metrics\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPARAMETERS FOR HISTORICAL DATA:\n\nINTERVAL (how often data points are sampled):\n\n  ğŸ“Š INTRADAY (for short-term/day trading):\n    \"1m\"  - 1 minute\n    \"2m\"  - 2 minutes\n    \"5m\"  - 5 minutes (popular for day trading)\n    \"15m\" - 15 minutes\n    \"30m\" - 30 minutes\n    \"60m\" - 1 hour\n    \"90m\" - 90 minutes\n  \n  ğŸ“ˆ LONG-TERM (for trends and analysis):\n    \"1d\"  - Daily (MOST COMMON)\n    \"5d\"  - 5 days\n    \"1wk\" - Weekly\n    \"1mo\" - Monthly\n    \"3mo\" - Quarterly\n\nRANGE (time period to retrieve):\n    \"1d\"   - 1 day\n    \"5d\"   - 5 days\n    \"1mo\"  - 1 month\n    \"3mo\"  - 3 months\n    \"6mo\"  - 6 months\n    \"1y\"   - 1 year\n    \"2y\"   - 2 years\n    \"5y\"   - 5 years\n    \"10y\"  - 10 years\n    \"ytd\"  - Year to date\n    \"max\"  - All available history\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nCOMMON USAGE EXAMPLES:\n\nâœ“ Daily prices for 1 month:\n  interval=\"1d\", range=\"1mo\"\n\nâœ“ Weekly prices for 1 year:\n  interval=\"1wk\", range=\"1y\"\n\nâœ“ 5-minute intraday today:\n  interval=\"5m\", range=\"1d\"\n\nâœ“ Full historical data:\n  interval=\"1d\", range=\"max\"\n\nâœ“ Last 6 months daily:\n  interval=\"1d\", range=\"6mo\"\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nMULTIPLE STOCKS:\nYou can query multiple stocks by providing comma-separated symbols.\n\nExample: symbols=\"AAPL,MSFT,GOOGL,TSLA\"\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nIMPORTANT GUIDELINES:\n\n1. ANALYSIS APPROACH:\n   - Always provide clear analysis with context\n   - Compare stocks when requested\n   - Identify trends and patterns in historical data\n   - Calculate percentage changes and growth rates\n   \n2. DATA AWARENESS:\n   - Mention that data may have 15-minute delay\n   - Verify market hours when discussing real-time data\n   - Consider market state (open, closed, pre-market, after-hours)\n   \n3. TOOL USAGE:\n   - Make MULTIPLE tool calls when analyzing several stocks\n   - Use Calculator tool for complex financial calculations\n   - Get both current quotes AND historical data for comparisons\n   \n4. RECOMMENDATIONS:\n   - Base recommendations on data analysis\n   - Provide reasoning for your conclusions\n   - Consider multiple factors: price trends, volume, fundamentals\n   - Always include risk disclaimers when appropriate\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nWORKFLOW FOR COMPARISONS:\n\nWhen user asks to compare stocks:\n\nStep 1: Get current quotes for all symbols\n  â†’ action=\"quote\", symbols=\"AAPL,MSFT,...\"\n\nStep 2: Get historical data for each stock\n  â†’ action=\"historical\", interval=\"1d\", range=\"1mo\"\n\nStep 3: Analyze the data\n  - Calculate performance metrics\n  - Identify trends\n  - Compare volatility\n\nStep 4: Provide clear recommendation\n  - Best performer\n  - Reasoning\n  - Risk considerations\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nRemember: You can make as many tool calls as needed to provide comprehensive analysis. Don't hesitate to fetch additional data if it helps answer the user's question better."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -128,
        -192
      ],
      "id": "6428bcae-bee6-4a01-90fa-149e261d7de3",
      "name": "Stock Agent"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"symbol\": \"AAPL\",\n  \"action\": \"historical\",\n  \"interval\": \"1d\",\n  \"range\": \"1mo\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        144,
        48
      ],
      "id": "8ad905a8-7130-40fd-966e-9d72da959c14",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "description": "Call this tool to make any stock market action",
        "workflowId": {
          "__rl": true,
          "value": "mR9mhMIz5NmCBHKI",
          "mode": "list",
          "cachedResultUrl": "/workflow/mR9mhMIz5NmCBHKI",
          "cachedResultName": "Yahoo Finance Quote"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "symbol": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('symbol', ``, 'string') }}",
            "action": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('action', ``, 'string') }}",
            "interval": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('interval', ``, 'string') }}",
            "range": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('range', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "symbol",
              "displayName": "symbol",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "action",
              "displayName": "action",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "interval",
              "displayName": "interval",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "range",
              "displayName": "range",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        16,
        48
      ],
      "id": "b102aeee-6add-4377-a438-3ef3e74d77a7",
      "name": "Yahoo Finance Quote"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-10-08T08:09:58.745Z",
      "updatedAt": "2025-10-08T08:09:58.745Z",
      "role": "workflow:owner",
      "workflowId": "GqjrPFI8GOZRzrzn",
      "projectId": "k1NZeG3qHb8L8scP"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-10-08T12:25:10.000Z",
  "versionId": "000a1fee-5a87-4cba-8ad8-211bc0ecec1b"
}